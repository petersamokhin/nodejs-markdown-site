!function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],mod):mod(CodeMirror)}(function(CodeMirror){"use strict";CodeMirror.defineMode("julia",function(config,parserConf){function wordRegexp(words,end){return void 0===end&&(end="\\b"),new RegExp("^(("+words.join(")|(")+"))"+end)}var operators=parserConf.operators||wordRegexp(["[<>]:","[<>=]=","<<=?",">>>?=?","=>","->","\\/\\/","[\\\\%*+\\-<>!=\\/^|&\\u00F7\\u22BB]=?","\\?","\\$","~",":","\\u00D7","\\u2208","\\u2209","\\u220B","\\u220C","\\u2218","\\u221A","\\u221B","\\u2229","\\u222A","\\u2260","\\u2264","\\u2265","\\u2286","\\u2288","\\u228A","\\u22C5","\\b(in|isa)\\b(?!.?\\()"],""),delimiters=parserConf.delimiters||/^[;,()[\]{}]/,identifiers=parserConf.identifiers||/^[_A-Za-z\u00A1-\u2217\u2219-\uFFFF][\w\u00A1-\u2217\u2219-\uFFFF]*!*/,chars=wordRegexp(["\\\\[0-7]{1,3}","\\\\x[A-Fa-f0-9]{1,2}","\\\\[abefnrtv0%?'\"\\\\]","([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])"],"'"),openers=wordRegexp(["begin","function","type","struct","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"]),closers=wordRegexp(["end","else","elseif","catch","finally"]),keywords=wordRegexp(["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","where","macro","module","baremodule","struct","type","mutable","immutable","quote","typealias","abstract","primitive","bitstype"]),builtins=wordRegexp(["true","false","nothing","NaN","Inf"]),macro=/^@[_A-Za-z][\w]*/,symbol=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,stringPrefixes=/^(`|([_A-Za-z\u00A1-\uFFFF]*"("")?))/;function inArray(state){return inGenerator(state,"[")}function inGenerator(state,bracket){var curr=currentScope(state),prev=currentScope(state,1);return void 0===bracket&&(bracket="("),curr===bracket||prev===bracket&&"for"===curr}function currentScope(state,n){return void 0===n&&(n=0),state.scopes.length<=n?null:state.scopes[state.scopes.length-(n+1)]}function tokenBase(stream,state){if(stream.match(/^#=/,!1))return state.tokenize=tokenComment,state.tokenize(stream,state);var leavingExpr=state.leavingExpr;if(stream.sol()&&(leavingExpr=!1),state.leavingExpr=!1,leavingExpr&&stream.match(/^'+/))return"operator";if(stream.match(/\.{4,}/))return"error";if(stream.match(/\.{1,3}/))return"operator";if(stream.eatSpace())return null;var ch=stream.peek();if("#"===ch)return stream.skipToEnd(),"comment";"["===ch&&state.scopes.push("["),"("===ch&&state.scopes.push("(");var match,scope=currentScope(state);if(inArray(state)&&"]"===ch&&("for"===scope&&state.scopes.pop(),state.scopes.pop(),state.leavingExpr=!0),inGenerator(state)&&")"===ch&&("for"===scope&&state.scopes.pop(),state.scopes.pop(),state.leavingExpr=!0),inArray(state)){if("end"==state.lastToken&&stream.match(/^:/))return"operator";if(stream.match(/^end/))return"number"}if((match=stream.match(openers,!1))&&state.scopes.push(match[0]),stream.match(closers,!1)&&state.scopes.pop(),stream.match(/^::(?![:\$])/))return state.tokenize=tokenAnnotation,state.tokenize(stream,state);if(!leavingExpr&&stream.match(symbol)||stream.match(/:([<>]:|<<=?|>>>?=?|->|\/\/|\.{2,3}|[\.\\%*+\-<>!\/^|&]=?|[~\?\$])/))return"builtin";if(stream.match(operators))return"operator";if(stream.match(/^\.?\d/,!1)){var imMatcher=RegExp(/^im\b/),numberLiteral=!1;if(stream.match(/^\d*\.(?!\.)\d*([Eef][\+\-]?\d+)?/i)&&(numberLiteral=!0),stream.match(/^\d+\.(?!\.)\d*/)&&(numberLiteral=!0),stream.match(/^\.\d+/)&&(numberLiteral=!0),stream.match(/^0x\.[0-9a-f]+p[\+\-]?\d+/i)&&(numberLiteral=!0),stream.match(/^0x[0-9a-f]+/i)&&(numberLiteral=!0),stream.match(/^0b[01]+/i)&&(numberLiteral=!0),stream.match(/^0o[0-7]+/i)&&(numberLiteral=!0),stream.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(numberLiteral=!0),stream.match(/^0(?![\dx])/i)&&(numberLiteral=!0),numberLiteral)return stream.match(imMatcher),state.leavingExpr=!0,"number"}if(stream.match(/^'/))return state.tokenize=tokenChar,state.tokenize(stream,state);if(stream.match(stringPrefixes))return state.tokenize=function(delimiter){'"""'===delimiter.substr(-3)?delimiter='"""':'"'===delimiter.substr(-1)&&(delimiter='"');return function(stream,state){if(stream.eat("\\"))stream.next();else{if(stream.match(delimiter))return state.tokenize=tokenBase,state.leavingExpr=!0,"string";stream.eat(/[`"]/)}return stream.eatWhile(/[^\\`"]/),"string"}}(stream.current()),state.tokenize(stream,state);if(stream.match(macro))return"meta";if(stream.match(delimiters))return null;if(stream.match(keywords))return"keyword";if(stream.match(builtins))return"builtin";var isDefinition=state.isDefinition||"function"==state.lastToken||"macro"==state.lastToken||"type"==state.lastToken||"struct"==state.lastToken||"immutable"==state.lastToken;return stream.match(identifiers)?isDefinition?"."===stream.peek()?(state.isDefinition=!0,"variable"):(state.isDefinition=!1,"def"):stream.match(/^({[^}]*})*\(/,!1)?(state.tokenize=tokenCallOrDef,state.tokenize(stream,state)):(state.leavingExpr=!0,"variable"):(stream.next(),"error")}function tokenCallOrDef(stream,state){var match=stream.match(/^(\(\s*)/);if(match&&(state.firstParenPos<0&&(state.firstParenPos=state.scopes.length),state.scopes.push("("),state.charsAdvanced+=match[1].length),"("==currentScope(state)&&stream.match(/^\)/)&&(state.scopes.pop(),state.charsAdvanced+=1,state.scopes.length<=state.firstParenPos)){var isDefinition=stream.match(/^(\s*where\s+[^\s=]+)*\s*?=(?!=)/,!1);return stream.backUp(state.charsAdvanced),state.firstParenPos=-1,state.charsAdvanced=0,state.tokenize=tokenBase,isDefinition?"def":"builtin"}if(stream.match(/^$/g,!1)){for(stream.backUp(state.charsAdvanced);state.scopes.length>state.firstParenPos;)state.scopes.pop();return state.firstParenPos=-1,state.charsAdvanced=0,state.tokenize=tokenBase,"builtin"}return state.charsAdvanced+=stream.match(/^([^()]*)/)[1].length,state.tokenize(stream,state)}function tokenAnnotation(stream,state){return stream.match(/.*?(?=,|;|{|}|\(|\)|=|$|\s)/),stream.match(/^{/)?state.nestedLevels++:stream.match(/^}/)&&state.nestedLevels--,0<state.nestedLevels?stream.match(/.*?(?={|})/)||stream.next():0==state.nestedLevels&&(state.tokenize=tokenBase),"builtin"}function tokenComment(stream,state){return stream.match(/^#=/)&&state.nestedLevels++,stream.match(/.*?(?=(#=|=#))/)||stream.skipToEnd(),stream.match(/^=#/)&&(state.nestedLevels--,0==state.nestedLevels&&(state.tokenize=tokenBase)),"comment"}function tokenChar(stream,state){var match,isChar=!1;if(stream.match(chars))isChar=!0;else if(match=stream.match(/\\u([a-f0-9]{1,4})(?=')/i)){((value=parseInt(match[1],16))<=55295||57344<=value)&&(isChar=!0,stream.next())}else if(match=stream.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var value;(value=parseInt(match[1],16))<=1114111&&(isChar=!0,stream.next())}return isChar?(state.leavingExpr=!0,state.tokenize=tokenBase,"string"):(stream.match(/^[^']+(?=')/)||stream.skipToEnd(),stream.match(/^'/)&&(state.tokenize=tokenBase),"error")}return{startState:function(){return{tokenize:tokenBase,scopes:[],lastToken:null,leavingExpr:!1,isDefinition:!1,nestedLevels:0,charsAdvanced:0,firstParenPos:-1}},token:function(stream,state){var style=state.tokenize(stream,state),current=stream.current();return current&&style&&(state.lastToken=current),style},indent:function(state,textAfter){var delta=0;return"]"!==textAfter&&")"!==textAfter&&"end"!==textAfter&&"else"!==textAfter&&"catch"!==textAfter&&"elseif"!==textAfter&&"finally"!==textAfter||(delta=-1),(state.scopes.length+delta)*config.indentUnit},electricInput:/\b(end|else|catch|finally)\b/,blockCommentStart:"#=",blockCommentEnd:"=#",lineComment:"#",fold:"indent"}}),CodeMirror.defineMIME("text/x-julia","julia")});